/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";var e=document.querySelector("#image"),t=document.querySelector(".popup__image"),r=document.querySelector(".popup__text"),n=document.querySelector("#gallery-card").content,o=(document.forms,document.querySelector(".gallery__grid-container")),a=document.querySelector(".profile__button-edit"),c=document.querySelector(".profile__button-add"),l=document.querySelectorAll(".popup"),i=document.forms.formUser,s=document.forms.formCard,u=document.querySelector("#user"),d=document.querySelector("#card"),p=document.querySelector(".profile__name"),m=document.querySelector(".profile__about"),f=[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}];function y(e){e.classList.add("popup_opened")}function v(e){e.classList.remove("popup_opened")}function _(o,a){var c=n.querySelector(".gallery__card").cloneNode(!0);return c.querySelector(".gallery__delet").addEventListener("click",(function(e){e.target.closest(".gallery__card").remove()})),c.querySelector(".gallery__image").src=a,c.querySelector(".gallery__image").alt=o,c.querySelector(".gallery__image").addEventListener("click",(function(n){t.src=a,r.textContent=o,t.alt=o+".",y(e)})),c.querySelector(".gallery__title").textContent=o,c.querySelector(".gallery__button-heart").addEventListener("click",(function(e){e.target.classList.toggle("gallery__button-heart_active")})),c}function g(e,t){t.prepend(e)}var S,q=function(e,t,r){!function(e){return e.some((function(e){return!e.validity.valid}))}(e)?(t.disabled=!1,t.classList.remove(r.inactiveButtonClass)):(t.disabled=!0,t.classList.add(r.inactiveButtonClass))};o.innerHTML="";for(var L=0;L<f.length;++L)g(_(f[L].name,f[L].link),o);i.addEventListener("submit",(function(e){e.preventDefault(),p.textContent=i.profileTitle.value,m.textContent=i.profileSubtitle.value,v(u)})),s.addEventListener("submit",(function(e){e.preventDefault(),""!==s.cardTitle.value&&""!==s.cardSubtitle.value&&g(_(s.cardTitle.value,s.cardSubtitle.value),o),s.reset(),v(d)})),c.addEventListener("click",(function(){y(d)})),a.addEventListener("click",(function(){y(u),i.profileTitle.value=p.textContent,i.profileSubtitle.value=m.textContent})),l.forEach((function(e){e.addEventListener("click",(function(e){(e.target.classList.contains("popup__close-icon")||e.target.classList.contains("popup"))&&v(e.target.closest(".popup"))}))})),window.addEventListener("keydown",(function(e){l.forEach((function(t){"Escape"===e.key&&v(t)}))})),S={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__save-button",inactiveButtonClass:"popup__save-button_type_inactive",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error_type_active"},Array.from(document.querySelectorAll(S.formSelector)).forEach((function(e){e.addEventListener("submit",(function(e){e.preventDefault()})),function(e,t){var r=Array.from(e.querySelectorAll(t.inputSelector)),n=e.querySelector(t.submitButtonSelector);q(r,n,t),r.forEach((function(o){o.addEventListener("input",(function(){!function(e,t,r){t.validity.patternMismatch?t.setCustomValidity(t.dataset.errorMessage):t.setCustomValidity(""),t.validity.valid?function(e,t,r){var n=e.querySelector(".".concat(t.id,"-error"));t.classList.remove(r.inputErrorClass),n.classList.remove(r.errorClass),n.textContent=""}(e,t,r):function(e,t,r,n){var o=e.querySelector(".".concat(t.id,"-error"));t.classList.add(n.inputErrorClass),o.textContent=r,o.classList.add(n.errorClass)}(e,t,t.validationMessage,r)}(e,o,t),q(r,n,t)}))}))}(e,S)}))})();